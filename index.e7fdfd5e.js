(()=>{"use strict";let o=[22.499175298089416,113.92055763860492],e=[{id:"marker1",position:[22.49873452335234,113.92084710744678]},{id:"marker2",position:[22.499309015991145,113.92109369200818]}],t=[{id:"mask-layer1",paths:[[22.498848426291726,113.9200162160721],[22.49857603262419,113.92080690762589],[22.49948978761296,113.9211741102115],[22.499762179556804,113.92037269737341]]},{id:"mask-layer2",paths:[[22.500368646631426,113.92210148717686],[22.50004681788184,113.92301193642277],[22.504157394997804,113.92460324329204],[22.504223222101064,113.92356612236836]]},{id:"mask-layer3",paths:[[22.50141728054279,113.92204109532372],[22.501317551951708,113.92226443304821],[22.5031298508702,113.92293816856409],[22.50141728054279,113.92204109532372]]}],n=[{id:"horse1",url:"/shumadasha/shunadasha2.gltf",position:[22.5009617334514,113.92265349975241,0],scale:[75,120,73],rotation:[0,249,0]},{id:"horse2",url:"/huayuancheng/huayuancheng2.gltf",position:[22.501486879246293,113.92307888668108,0],scale:[92,120,104],rotation:[0,251,0]},{id:"horse3",url:"/huayuanchengduimian/huayuangchengduimian2.gltf",position:[22.501587264924265,113.9229286685684,0],scale:[160,120,48],rotation:[0,250.18,0]},{id:"horse4",url:"/woerma/woerma2.gltf",position:[22.50176177956069,113.92329162772049,0],scale:[80,120,95],rotation:[0,250.2,0]}];window.addEventListener("load",function(){console.log("所有资源已加载完成");try{let i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"container",t=window.TMap;if(!t)throw Error("TMap 未注入");let n=new t.LatLng(...o);return new t.Map(e,{center:n,zoom:17,pitch:45})}();!function(o){let e=window.TMap;if(!e)throw Error("TMap 未注入");let n=t.map(o=>({id:o.id,paths:o.paths.map(o=>new e.LatLng(...o))}));new e.MaskLayer({map:o,geometries:n}).on("click",o=>console.log("遮罩层点击事件：",o.geometry.id))}(i),function(o){let t=window.TMap;if(!t)throw Error("TMap 未注入");let n=e.map(o=>({id:o.id,styleId:"marker",position:new t.LatLng(...o.position)})),i=new t.MultiMarker({id:"marker-layer",map:o,styles:{marker:new t.MarkerStyle({width:20,height:28,enableRelativeScale:!0})},geometries:n});i.on("click",o=>{console.log("markerID:",o.geometry.id),console.log("当前marker位置：",o.geometry.position.toString())}),o.on("zoom_changed",()=>{let e=o.getZoom();i.setVisible(e>=16.5)})}(i),function(o){let e=window.TMap;if(!e)throw Error("TMap 未注入");let t=[];Promise.all(n.map(n=>{let i=new e.model.GLTFModel({url:n.url,map:o,id:n.id,position:new e.LatLng(...n.position),scale:n.scale,rotation:n.rotation});return t.push(i),new Promise(o=>{i.on("loaded",()=>{console.log("模型",n.id,"加载成功"),o()}),i.on("error",()=>{console.error("模型",n.id,"加载失败"),o()})})})).then(()=>{console.log("所有模型加载完成");let o=document.getElementById("mapLoading");o&&o.remove()})}(i);let a=window.wx;if(a&&a.miniProgram&&a.miniProgram.navigateBack){let o=document.getElementById("mapBack");o&&o.addEventListener("click",()=>{a.miniProgram.navigateBack()})}if(document.getElementById("mapLocation")){let o=document.getElementById("mapLocation");console.log(a.miniProgram),console.log(a.miniProgram.getLocation),console.log(a.getLocation),o&&o.addEventListener("click",()=>{a.miniProgram.getLocation&&(console.log("getLocation11111"),a.miniProgram.getLocation({type:"wgs84",success:o=>{console.log(o)},fail:o=>{console.log(o)}})),a.getLocation&&(console.log("getLocation2222"),a.getLocation({type:"wgs84",success:o=>{console.log(o)}}))})}}catch(o){console.error(o)}})})();